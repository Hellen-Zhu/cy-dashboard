# MinIO ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ä»€ä¹ˆæ˜¯ MinIOï¼Ÿ

MinIO æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§
- **S3 å…¼å®¹**: å®Œå…¨å…¼å®¹ Amazon S3 API
- **é«˜æ€§èƒ½**: æ”¯æŒé«˜å¹¶å‘è¯»å†™æ“ä½œ
- **åˆ†å¸ƒå¼**: æ”¯æŒæ°´å¹³æ‰©å±•å’Œå®¹é”™
- **è½»é‡çº§**: èµ„æºå ç”¨å°‘ï¼Œéƒ¨ç½²ç®€å•
- **å¼€æº**: åŸºäº Apache License 2.0

### ğŸ”„ åœ¨ Sorry Cypress ä¸­çš„ä½œç”¨
- **å­˜å‚¨æˆªå›¾**: ä¿å­˜æµ‹è¯•å¤±è´¥æ—¶çš„å±å¹•æˆªå›¾
- **å­˜å‚¨è§†é¢‘**: ä¿å­˜æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹çš„è§†é¢‘å½•åˆ¶
- **æ–‡ä»¶ç®¡ç†**: æä¾›æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ç­‰æ“ä½œ
- **è®¿é—®æ§åˆ¶**: ç®¡ç†æ–‡ä»¶çš„è®¿é—®æƒé™

## ğŸŒ è®¿é—® MinIO

### Web æ§åˆ¶å°è®¿é—®
- **åœ°å€**: http://localhost:9090
- **ç”¨æˆ·å**: `minioadmin`
- **å¯†ç **: `minioadmin`

### API è®¿é—®
- **API ç«¯ç‚¹**: http://localhost:9000
- **è®¿é—®å¯†é’¥**: `minioadmin`
- **ç§˜å¯†å¯†é’¥**: `minioadmin`

## ğŸ”§ åŸºæœ¬æ“ä½œ

### 1. ç™»å½• Web æ§åˆ¶å°

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:9090
2. è¾“å…¥ç”¨æˆ·å: `minioadmin`
3. è¾“å…¥å¯†ç : `minioadmin`
4. ç‚¹å‡» "Login"

### 2. æŸ¥çœ‹å­˜å‚¨æ¡¶

ç™»å½•åï¼Œæ‚¨å°†çœ‹åˆ° `sorry-cypress` å­˜å‚¨æ¡¶ï¼Œè¿™æ˜¯ Sorry Cypress ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨æ¡¶ã€‚

### 3. æµè§ˆæ–‡ä»¶

åœ¨å­˜å‚¨æ¡¶ä¸­ï¼Œæ‚¨å¯ä»¥ï¼š
- æŸ¥çœ‹æ‰€æœ‰ä¸Šä¼ çš„æ–‡ä»¶
- æŒ‰æ–‡ä»¶å¤¹ç»“æ„æµè§ˆ
- æœç´¢ç‰¹å®šæ–‡ä»¶
- æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯

## ğŸ“ æ–‡ä»¶ç»“æ„

Sorry Cypress åœ¨ MinIO ä¸­åˆ›å»ºçš„æ–‡ä»¶ç»“æ„ï¼š

```
sorry-cypress/
â”œâ”€â”€ screenshots/
â”‚   â”œâ”€â”€ project-id/
â”‚   â”‚   â”œâ”€â”€ run-id/
â”‚   â”‚   â”‚   â”œâ”€â”€ spec-name/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ screenshot.png
â”œâ”€â”€ videos/
â”‚   â”œâ”€â”€ project-id/
â”‚   â”‚   â”œâ”€â”€ run-id/
â”‚   â”‚   â”‚   â”œâ”€â”€ spec-name/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ video.mp4
â””â”€â”€ uploads/
    â””â”€â”€ other-files/
```

## ğŸ› ï¸ ç®¡ç†æ“ä½œ

### ä¸Šä¼ æ–‡ä»¶
1. åœ¨ Web æ§åˆ¶å°ä¸­ç‚¹å‡» "Upload"
2. é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶
3. é€‰æ‹©ç›®æ ‡æ–‡ä»¶å¤¹
4. ç‚¹å‡» "Upload"

### ä¸‹è½½æ–‡ä»¶
1. æ‰¾åˆ°è¦ä¸‹è½½çš„æ–‡ä»¶
2. ç‚¹å‡»æ–‡ä»¶åæˆ–å³é”®é€‰æ‹© "Download"
3. æ–‡ä»¶å°†ä¸‹è½½åˆ°æœ¬åœ°

### åˆ é™¤æ–‡ä»¶
1. é€‰æ‹©è¦åˆ é™¤çš„æ–‡ä»¶
2. ç‚¹å‡»åˆ é™¤å›¾æ ‡æˆ–å³é”®é€‰æ‹© "Delete"
3. ç¡®è®¤åˆ é™¤æ“ä½œ

### åˆ›å»ºæ–‡ä»¶å¤¹
1. ç‚¹å‡» "Create Folder"
2. è¾“å…¥æ–‡ä»¶å¤¹åç§°
3. ç‚¹å‡» "Create"

## ğŸ” æ–‡ä»¶ç±»å‹è¯´æ˜

### æˆªå›¾æ–‡ä»¶ (.png)
- **ç”¨é€”**: æµ‹è¯•å¤±è´¥æ—¶çš„å±å¹•æˆªå›¾
- **å‘½å**: é€šå¸¸åŒ…å«æµ‹è¯•åç§°å’Œæ—¶é—´æˆ³
- **ä½ç½®**: `screenshots/project-id/run-id/spec-name/`

### è§†é¢‘æ–‡ä»¶ (.mp4)
- **ç”¨é€”**: æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹çš„è§†é¢‘å½•åˆ¶
- **å‘½å**: é€šå¸¸åŒ…å«æµ‹è¯•åç§°å’Œæ—¶é—´æˆ³
- **ä½ç½®**: `videos/project-id/run-id/spec-name/`

## ğŸ“Š å­˜å‚¨ç»Ÿè®¡

### æŸ¥çœ‹å­˜å‚¨ä½¿ç”¨æƒ…å†µ
1. åœ¨ Web æ§åˆ¶å°å·¦ä¾§èœå•ç‚¹å‡» "Dashboard"
2. æŸ¥çœ‹å­˜å‚¨æ¡¶ä½¿ç”¨ç»Ÿè®¡
3. æŸ¥çœ‹æ–‡ä»¶æ•°é‡å’Œæ€»å¤§å°

### ç›‘æ§å­˜å‚¨å¢é•¿
- å®šæœŸæ£€æŸ¥å­˜å‚¨ä½¿ç”¨é‡
- æ¸…ç†ä¸éœ€è¦çš„æ—§æ–‡ä»¶
- ç›‘æ§å­˜å‚¨è¶‹åŠ¿

## ğŸ” æƒé™ç®¡ç†

### å½“å‰é…ç½®
- **è®¿é—®æƒé™**: å…¬å¼€è¯»å–
- **ä¸Šä¼ æƒé™**: éœ€è¦è®¤è¯
- **åˆ é™¤æƒé™**: éœ€è¦è®¤è¯

### ä¿®æ”¹æƒé™
1. åœ¨å­˜å‚¨æ¡¶è®¾ç½®ä¸­ä¿®æ”¹è®¿é—®ç­–ç•¥
2. é…ç½® CORS è§„åˆ™
3. è®¾ç½®ç”Ÿå‘½å‘¨æœŸç­–ç•¥

## ğŸš€ é«˜çº§åŠŸèƒ½

### 1. ç‰ˆæœ¬æ§åˆ¶
- å¯ç”¨æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶
- æŸ¥çœ‹æ–‡ä»¶å†å²ç‰ˆæœ¬
- æ¢å¤åˆ é™¤çš„æ–‡ä»¶

### 2. ç”Ÿå‘½å‘¨æœŸç®¡ç†
- è®¾ç½®æ–‡ä»¶è¿‡æœŸæ—¶é—´
- è‡ªåŠ¨åˆ é™¤æ—§æ–‡ä»¶
- é…ç½®å­˜å‚¨ç­–ç•¥

### 3. é€šçŸ¥é…ç½®
- è®¾ç½®æ–‡ä»¶ä¸Šä¼ é€šçŸ¥
- é…ç½® Webhook
- é›†æˆå¤–éƒ¨æœåŠ¡

## ğŸ”§ å‘½ä»¤è¡Œå·¥å…· (mc)

### å®‰è£… mc å®¢æˆ·ç«¯
```bash
# macOS
brew install minio/stable/mc

# æˆ–è€…ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶
wget https://dl.min.io/client/mc/release/darwin-amd64/mc
chmod +x mc
```

### é…ç½®è¿æ¥
```bash
# é…ç½® MinIO æœåŠ¡å™¨
mc config host add myminio http://localhost:9000 minioadmin minioadmin

# éªŒè¯è¿æ¥
mc ls myminio
```

### å¸¸ç”¨å‘½ä»¤
```bash
# åˆ—å‡ºå­˜å‚¨æ¡¶
mc ls myminio

# åˆ—å‡ºæ–‡ä»¶
mc ls myminio/sorry-cypress

# ä¸Šä¼ æ–‡ä»¶
mc cp local-file.png myminio/sorry-cypress/

# ä¸‹è½½æ–‡ä»¶
mc cp myminio/sorry-cypress/file.png ./

# åˆ é™¤æ–‡ä»¶
mc rm myminio/sorry-cypress/file.png

# åŒæ­¥æ–‡ä»¶å¤¹
mc mirror local-folder/ myminio/sorry-cypress/
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### æ— æ³•è®¿é—® Web æ§åˆ¶å°
1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**:
   ```bash
   docker-compose -f docker-compose.local.yml ps storage
   ```

2. **æ£€æŸ¥ç«¯å£**:
   ```bash
   lsof -i :9090
   ```

3. **é‡å¯æœåŠ¡**:
   ```bash
   docker-compose -f docker-compose.local.yml restart storage
   ```

### æ–‡ä»¶ä¸Šä¼ å¤±è´¥
1. **æ£€æŸ¥å­˜å‚¨ç©ºé—´**:
   - æŸ¥çœ‹ç£ç›˜ç©ºé—´
   - æ£€æŸ¥ Docker å­˜å‚¨é™åˆ¶

2. **æ£€æŸ¥æƒé™**:
   - éªŒè¯è®¿é—®å¯†é’¥
   - æ£€æŸ¥å­˜å‚¨æ¡¶æƒé™

3. **æŸ¥çœ‹æ—¥å¿—**:
   ```bash
   docker-compose -f docker-compose.local.yml logs storage
   ```

### æ–‡ä»¶è®¿é—®æƒé™é—®é¢˜
1. **æ£€æŸ¥ CORS é…ç½®**
2. **éªŒè¯è®¿é—®ç­–ç•¥**
3. **æ£€æŸ¥ç½‘ç»œè¿æ¥**

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. å­˜å‚¨ä¼˜åŒ–
- å®šæœŸæ¸…ç†æ—§æ–‡ä»¶
- å‹ç¼©å¤§æ–‡ä»¶
- ä½¿ç”¨é€‚å½“çš„å­˜å‚¨ç­–ç•¥

### 2. ç½‘ç»œä¼˜åŒ–
- é…ç½® CDN
- ä¼˜åŒ–ç½‘ç»œå¸¦å®½
- ä½¿ç”¨å°±è¿‘çš„å­˜å‚¨èŠ‚ç‚¹

### 3. ç›‘æ§å’Œå‘Šè­¦
- è®¾ç½®å­˜å‚¨ä½¿ç”¨å‘Šè­¦
- ç›‘æ§è®¿é—®æ€§èƒ½
- è·Ÿè¸ªé”™è¯¯ç‡

## ğŸ”— é›†æˆç¤ºä¾‹

### åœ¨ Sorry Cypress ä¸­é…ç½®
```javascript
// cypress.config.js
module.exports = {
  env: {
    sorryCypressUrl: 'http://localhost:1234',
    // MinIO é…ç½®ä¼šè‡ªåŠ¨ä» Sorry Cypress è·å–
  }
}
```

### ç›´æ¥è®¿é—® MinIO API
```javascript
// ä½¿ç”¨ AWS SDK è®¿é—® MinIO
const AWS = require('aws-sdk');

const s3 = new AWS.S3({
  endpoint: 'http://localhost:9000',
  accessKeyId: 'minioadmin',
  secretAccessKey: 'minioadmin',
  s3ForcePathStyle: true,
  signatureVersion: 'v4'
});

// åˆ—å‡ºæ–‡ä»¶
s3.listObjects({
  Bucket: 'sorry-cypress'
}, (err, data) => {
  if (err) console.log(err);
  else console.log(data);
});
```

## ğŸ“š ç›¸å…³èµ„æº

- [MinIO å®˜æ–¹æ–‡æ¡£](https://docs.min.io/)
- [MinIO GitHub](https://github.com/minio/minio)
- [S3 API å…¼å®¹æ€§](https://docs.min.io/docs/minio-gateway-for-s3.html)
- [Sorry Cypress å­˜å‚¨é…ç½®](https://docs.sorry-cypress.dev/)

---

**é…ç½®æ—¶é—´**: 2025-07-27  
**MinIO ç‰ˆæœ¬**: RELEASE.2025-07-23T15-54-02Z  
**è®¿é—®åœ°å€**: http://localhost:9090  
**API åœ°å€**: http://localhost:9000 